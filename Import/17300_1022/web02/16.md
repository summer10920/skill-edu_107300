# 第16題.文章管理

重點在limit與分頁導覽，以及多了dpy選項。偷t11的版型來改，適時調整page每次顯示為3這個數字。以及規劃dpy與del這兩個checkbox

---

# 新增admin\_news.php\(參考news.php\)

### 1. 後台的內容格式

整個複製版型後，根據需求做修改調整，記得from提交改成到do=adminnews。至於limit與page\_link都在news.php那裏出現過，改一下5變3，以及page\_link的href的前往位置

```php
<fieldset>
<legend>最新文章管理</legend>
<form action="api.php?do=adminnews" method="post">
<table width=100% bgcolor=#fff cellpadding=10>
    <tr><td>編號</td><td>標題</td><td>顯示</td><td>刪除</td></tr>
<?php
$nowpage=(empty($_GET['page']))?1:$_GET['page'];
$begin=($nowpage-1)*3;
$result=select("t7_blog","1 limit ".$begin.",3");
foreach($result as $row){
?> 
    <tr>
        <td><?=$row['id']?></td>
        <td><?=$row['title']?></td>
        <input type="hidden" name="dpy[<?=$row['id']?>]" value=0>
        <td><input type="checkbox" name="dpy[<?=$row['id']?>]" value=1 <?=($row['dpy'])?"checked":""?>></td>
        <td><input type="checkbox" name="del[]" value=<?=$row['id']?>></td>
    </tr>
<?php
}
?>
<tr><td colspan=4 align=center><input type="submit" value="確定修改"></td></tr>
</table>
</form>
<?php
$result=page_link("t7_blog",1,3,$nowpage);
foreach($result as $name=>$data)
    echo '<a href="?do=admin_news&page='.$data.'">'.$name.'</a>';
?>
</fieldset>
```

# 增添api.php

對api.php做SQL處理，接著回到該單元內容。\(可複製前題目做修改\)

```php
case 'adminnews':
	update($_POST,"t7_blog");
	delete($_POST,"t7_blog");
	plo("index.php?do=admin_news");
break;
```



